{# Layouts and macros #}
{% extends "_layout/site" %}
{% import '_macros/form' as form %}

{# Set variables #}
{% if not currentUser %}
    {% redirect '/account/login' %}
{% endif %}

{% block content %}
<section class="bg-pink py-20 lg:py-40 xl:py-70">
    <div class="container w-10/12 bg-white relative p-40 lg:p-80">
        <h1 class="text-30 font-serif uppercase mb-20">{{'Change Password'|t}}</h1>
        <div class="flex">
            {% include '_commerce/account/partials/accountNav' %}

            <form method="post" accept-charset="UTF-8" enctype="multipart/form-data" class="w-6/12 | js-validate" data-ajax>
            {{ csrfInput() }}
            <input type="hidden" name="action" value="users/save-user">
            <input type="hidden" name="userId" value="{{ currentUser.id }}">
            {{ redirectInput('') }}

            {% if errors is defined %}
                <ul class="text-redd-500 mb-6">
                {% for error in errors %}
                    <li>{{ error }}</li>
                {% endfor %}
                </ul>
            {% endif %}
            
            {{ form.input('', { id: 'password', name: 'password', placeholder: 'Old password'|t, type: 'password', class: ''  }) }}
            {{ form.input('', { id: 'newPassword', name: 'newPassword', placeholder: 'New password'|t, type: 'password', 'data-equal-to': '#newPasswordConfirm', class: ''  }) }}
            {{ form.input('', { id: 'newPasswordConfirm', name: 'newPasswordConfirm', placeholder: 'Confirm new password'|t, type: 'password', class: ''  }) }}

            <div class="flex justify-end mt-30"">
                <button type="submit" class="border border-black text-black py-10 px-20 block w-max hover:bg-black hover:text-white transition duration-300">{{ 'Save changes'|t }}</button>
            </div>
            </form>
        </div>
    </div>
</section>
{% endblock %}
